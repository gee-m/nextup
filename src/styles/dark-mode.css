/* @order: 70 */
/* @category: styles */

/* Dark Mode Styles */
body.dark-mode {
    background: #0a0a0a;
}

body.dark-mode #canvas-container {
    background: #000000;
}

/* Keep buttons white in dark mode, just add white borders */
body.dark-mode button.secondary {
    border: 1px solid rgba(255, 255, 255, 0.5);
}

body.dark-mode .task-node rect {
    fill: #2d3748;
    stroke: #4a5568;
    filter: drop-shadow(0 2px 8px rgba(0, 0, 0, 0.5));
}

body.dark-mode .task-node.done rect {
    fill: #2d4a2f;
    stroke: #48bb78;
    filter: drop-shadow(0 2px 8px rgba(72, 187, 120, 0.4));
}

body.dark-mode .task-node.working rect {
    fill: #4a3f2d;
    stroke: #ed8936;
    filter: drop-shadow(0 3px 10px rgba(237, 137, 54, 0.5));
}

body.dark-mode .task-node.parent-of-working rect {
    stroke: #ed8936;
    filter: drop-shadow(0 0 6px rgba(237, 137, 54, 0.5));
}

body.dark-mode .task-node.incomplete-child-of-working rect {
    stroke: #fc8181;
    filter: drop-shadow(0 0 4px rgba(252, 129, 129, 0.4));
}

body.dark-mode .task-node.selected rect {
    stroke: #4299e1;
    filter: drop-shadow(0 0 6px rgba(66, 153, 225, 0.7));
}

body.dark-mode .task-node text {
    fill: #e2e8f0;
}

body.dark-mode .preview-node rect {
    fill: #1a365d;
    stroke: #4299e1;
    stroke-width: 2;
    stroke-dasharray: 5,3;
    opacity: 0.7;
    filter: none;
}

body.dark-mode .preview-node text {
    fill: #90cdf4;
    opacity: 0.8;
    font-style: italic;
}

body.dark-mode .cursor-arrow path {
    stroke: #4299e1;
    fill: none;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5));
}

/* Dark mode: Only style VISIBLE lines, NOT hit lines */
body.dark-mode .link.dependency {
    stroke: #ffffff;
    stroke-width: 2.5;
    stroke-dasharray: 5,5;
}

body.dark-mode .link.parent-visible {
    stroke: #ffffff;
    stroke-width: 2.5;
}

body.dark-mode .link.other-parent {
    stroke: #ffffff;
    stroke-width: 2;
    stroke-dasharray: 3,3;
}

/* Keep hit lines transparent with 15px width for easy clicking */
body.dark-mode .link.dependency-hit,
body.dark-mode .link.parent-hit,
body.dark-mode .link.other-parent-hit {
    stroke: transparent;
    stroke-width: 15;
}

body.dark-mode .marker {
    fill: #ffffff;
}

body.dark-mode .link.dependency-hit:hover + .link.dependency,
body.dark-mode .link.parent-hit:hover + .link.parent-visible,
body.dark-mode .link.other-parent-hit:hover + .link.other-parent {
    stroke: #4299e1 !important;
}

body.dark-mode .link.selected {
    stroke: #4299e1 !important;
}

body.dark-mode .task-node:hover rect {
    filter: brightness(1.2);
}

/* Dark mode modal styling */
body.dark-mode .modal-content {
    background: #1e293b;
    color: #e2e8f0;
}

body.dark-mode .modal-content h2 {
    color: #f1f5f9;
}

body.dark-mode .modal-content p {
    color: #94a3b8;
}

body.dark-mode .modal-content button {
    background: rgba(59, 130, 246, 0.2);
    color: #60a5fa;
    border: 1px solid rgba(59, 130, 246, 0.4);
}

body.dark-mode .modal-content button:hover {
    background: rgba(59, 130, 246, 0.3);
    color: #93c5fd;
}

body.dark-mode .modal-content button.secondary {
    background: rgba(148, 163, 184, 0.15);
    color: #cbd5e1;
    border: 1px solid rgba(148, 163, 184, 0.3);
}

body.dark-mode .modal-content button.secondary:hover {
    background: rgba(148, 163, 184, 0.25);
    color: #e2e8f0;
}

body.dark-mode #import-textarea {
    background: #0f172a;
    color: #e2e8f0;
    border-color: #475569;
}

body.dark-mode #prompt-input {
    background: #0f172a;
    color: #e2e8f0;
    border-color: #475569;
}

body.dark-mode .node-menu {
    background: #1e293b;
    border: 1px solid #475569;
}

body.dark-mode .node-menu button {
    color: #e2e8f0;
}

body.dark-mode .node-menu button:hover {
    background: #334155;
}

body.dark-mode .node-menu .dependency-section {
    border-bottom-color: #475569;
}

body.dark-mode .node-menu .dependency-section h4 {
    color: #94a3b8;
}

body.dark-mode .node-menu .dependency-item span {
    color: #e2e8f0;
}

/* Dark mode dropdown and submenu styling */
body.dark-mode .dropdown-content {
    background: rgba(30, 41, 59, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.3);
}

body.dark-mode .dropdown-item {
    color: #e2e8f0;
    border-bottom: 1px solid rgba(148, 163, 184, 0.15);
}

body.dark-mode .dropdown-item:hover {
    background: rgba(148, 163, 184, 0.2);
}

body.dark-mode .dropdown-item.special {
    background: rgba(156, 39, 176, 0.25);
}

body.dark-mode .dropdown-item.special:hover {
    background: rgba(156, 39, 176, 0.4);
}

body.dark-mode .dropdown-empty {
    color: rgba(226, 232, 240, 0.5);
}

body.dark-mode .submenu {
    background: rgba(30, 41, 59, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.3);
}

body.dark-mode .submenu-item {
    color: #e2e8f0;
    border-bottom: 1px solid rgba(148, 163, 184, 0.15);
}

body.dark-mode .submenu-item:hover {
    background: rgba(148, 163, 184, 0.2);
}

body.dark-mode .submenu-item.special {
    background: rgba(156, 39, 176, 0.25);
}

body.dark-mode .submenu-item.special:hover {
    background: rgba(156, 39, 176, 0.4);
}

body.dark-mode .submenu-empty {
    color: rgba(226, 232, 240, 0.5);
}

body.dark-mode .submenu-nested {
    background: rgba(30, 41, 59, 0.98);
    border: 1px solid rgba(148, 163, 184, 0.3);
}

body.dark-mode .link-badge rect {
    fill: #1e88e5;
}

body.dark-mode .links-dropdown {
    background: #2a2a2a !important;
    border-color: #444 !important;
    color: #e0e0e0;
}

body.dark-mode .links-dropdown > div {
    border-bottom-color: #444 !important;
}

body.dark-mode .links-dropdown > div:hover {
    background-color: #333 !important;
}
